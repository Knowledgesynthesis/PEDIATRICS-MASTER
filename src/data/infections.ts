import { Infection } from '@/store/useStore'

export const infections: Infection[] = [
  {
    id: 'otitis-media',
    name: 'Otitis Media (Ear Infection)',
    ageGroup: '6 months - 7 years (peak)',
    diagnosis: [
      'Ear pain, pulling at ear',
      'Bulging, erythematous tympanic membrane',
      'Reduced mobility of TM on pneumatic otoscopy',
      'Middle ear effusion',
      'Fever (may be present)',
    ],
    management: [
      'Watchful waiting (48-72h) for mild cases in children >6 months',
      'Amoxicillin 80-90 mg/kg/day divided BID for 10 days (5-7 days if ≥6 years)',
      'Amoxicillin-clavulanate if failed amoxicillin or recent antibiotic use',
      'Pain management: ibuprofen or acetaminophen',
    ],
    redFlags: [
      'Age <6 months',
      'Severe symptoms (fever >39°C, severe pain)',
      'Bilateral AOM in children <2 years',
      'Symptoms of mastoiditis',
      'Immunocompromised',
    ],
    notes: 'Most cases are viral and self-limited. Reserve antibiotics for appropriate cases.',
  },
  {
    id: 'bronchiolitis',
    name: 'Bronchiolitis',
    ageGroup: '<2 years (peak 3-6 months)',
    diagnosis: [
      'Prodrome of URI symptoms (rhinorrhea, cough)',
      'Progressive wheezing and tachypnea',
      'Increased work of breathing (retractions, nasal flaring)',
      'Crackles on auscultation',
      'Typically RSV (respiratory syncytial virus)',
      'Peak season: fall and winter',
    ],
    management: [
      'Supportive care is cornerstone',
      'Hydration (may need IV if unable to feed)',
      'Supplemental oxygen if SpO2 <90%',
      'Nasal suctioning before feeds',
      'Monitor for apnea in young infants',
      'NO routine bronchodilators (ineffective)',
      'NO routine steroids (not beneficial)',
    ],
    redFlags: [
      'Age <3 months',
      'History of prematurity',
      'Chronic lung disease',
      'Congenital heart disease',
      'Apnea episodes',
      'Severe retractions or respiratory distress',
      'Dehydration',
      'SpO2 <90%',
    ],
    notes: 'Bronchodilators and steroids are generally NOT indicated. This is a viral illness requiring supportive care.',
  },
  {
    id: 'croup',
    name: 'Croup (Laryngotracheobronchitis)',
    ageGroup: '6 months - 3 years',
    diagnosis: [
      'Barking/seal-like cough',
      'Hoarseness',
      'Inspiratory stridor',
      'Low-grade fever',
      'Symptoms worse at night',
      'Steeple sign on AP neck X-ray (if obtained)',
      'Usually parainfluenza virus',
    ],
    management: [
      'Mild: single dose dexamethasone 0.6 mg/kg PO (max 10 mg)',
      'Moderate-Severe: dexamethasone + nebulized epinephrine',
      'Cool mist may provide comfort',
      'Racemic epinephrine (nebulized) for severe stridor at rest',
      'Observe for 2-4 hours after epinephrine (rebound possible)',
    ],
    redFlags: [
      'Stridor at rest',
      'Significant respiratory distress',
      'Cyanosis',
      'Altered mental status',
      'Drooling (consider epiglottitis)',
      'Inability to swallow',
      'Toxic appearance',
    ],
    notes: 'Dexamethasone effective even in mild cases. Nebulized epinephrine for severe cases with monitoring.',
  },
  {
    id: 'pneumonia',
    name: 'Pneumonia',
    ageGroup: 'All ages',
    diagnosis: [
      'Fever, cough, tachypnea',
      'Increased work of breathing',
      'Crackles or decreased breath sounds',
      'Hypoxia',
      'CXR: infiltrate or consolidation',
      'Viral most common in young children',
      'Bacterial: S. pneumoniae, H. influenzae, M. pneumoniae (older children)',
    ],
    management: [
      'Outpatient (uncomplicated): Amoxicillin 90 mg/kg/day',
      'Atypical coverage (≥5 years): Add azithromycin or use amoxicillin-clavulanate',
      'Hospitalization if severe, hypoxic, or unable to tolerate PO',
      'Supportive care: hydration, oxygen, fever control',
    ],
    redFlags: [
      'Age <3 months',
      'SpO2 <90%',
      'Severe respiratory distress',
      'Dehydration or inability to feed',
      'Toxic appearance',
      'Immunocompromised',
      'Empyema on imaging',
    ],
    notes: 'Distinguish viral vs bacterial. Most pneumonia in children <5 is viral.',
  },
  {
    id: 'meningitis',
    name: 'Meningitis',
    ageGroup: 'All ages (neonates high risk)',
    diagnosis: [
      'Fever, headache, neck stiffness',
      'Altered mental status',
      'Photophobia, vomiting',
      'In neonates: irritability, poor feeding, bulging fontanelle, seizures',
      'Kernig and Brudzinski signs (older children)',
      'Petechial or purpuric rash (meningococcemia)',
    ],
    management: [
      'IMMEDIATE empiric antibiotics after blood cultures',
      'Do not delay for LP if unstable',
      'Neonates: ampicillin + cefotaxime (or gentamicin)',
      '1 month - 50 years: ceftriaxone or cefotaxime + vancomycin',
      'Dexamethasone if bacterial meningitis suspected (controversial in children)',
      'Lumbar puncture for diagnosis',
    ],
    redFlags: [
      'Any suspicion of meningitis requires immediate evaluation',
      'Signs of increased ICP',
      'Purpuric rash',
      'Hemodynamic instability',
      'Seizures',
    ],
    notes: 'Bacterial meningitis is a medical emergency. Start antibiotics ASAP. Common organisms: neonates (GBS, E. coli, Listeria), older (S. pneumoniae, N. meningitidis).',
  },
  {
    id: 'strep-pharyngitis',
    name: 'Streptococcal Pharyngitis (Strep Throat)',
    ageGroup: '5-15 years (uncommon <3 years)',
    diagnosis: [
      'Sore throat, fever',
      'Tonsillar exudates',
      'Tender anterior cervical lymphadenopathy',
      'Absence of cough',
      'Scarlatiniform rash possible',
      'Rapid strep test or throat culture for confirmation',
    ],
    management: [
      'Penicillin V or Amoxicillin for 10 days',
      'Azithromycin (5 days) if penicillin allergic',
      'Symptomatic relief: acetaminophen, throat lozenges',
      'Prevents rheumatic fever and suppurative complications',
    ],
    redFlags: [
      'Difficulty breathing or swallowing',
      'Drooling',
      'Toxic appearance',
      'Peritonsillar abscess suspected',
    ],
    notes: 'Use Centor criteria to guide testing. Most pharyngitis in children is viral.',
  },
]

export const infectionDecisionTrees = {
  'otitis-media': {
    severe: {
      criteria: ['Age <6 months', 'Temperature ≥39°C (102.2°F)', 'Moderate to severe otalgia >48h'],
      action: 'Immediate antibiotic therapy: Amoxicillin 80-90 mg/kg/day',
    },
    nonsevere: {
      criteria: ['Age ≥6 months', 'Mild symptoms', 'Temperature <39°C'],
      action: 'Watchful waiting 48-72h OR immediate antibiotics (shared decision)',
    },
  },
  'bronchiolitis': {
    mild: {
      criteria: ['Well-appearing', 'Feeding well', 'No respiratory distress', 'SpO2 >90%'],
      action: 'Outpatient supportive care, close follow-up',
    },
    moderate: {
      criteria: ['Mild-moderate retractions', 'Decreased PO intake', 'SpO2 90-95%'],
      action: 'Consider observation, IV hydration, oxygen',
    },
    severe: {
      criteria: ['Severe distress', 'Apnea', 'SpO2 <90%', 'Age <3 months', 'Dehydration'],
      action: 'Hospitalization, oxygen, IV fluids, monitor for apnea',
    },
  },
  'croup': {
    mild: {
      criteria: ['No stridor at rest', 'Normal air entry'],
      action: 'Dexamethasone 0.6 mg/kg PO × 1, discharge home',
    },
    moderate: {
      criteria: ['Stridor at rest', 'Mild-moderate retractions'],
      action: 'Dexamethasone + consider nebulized epinephrine, observe',
    },
    severe: {
      criteria: ['Stridor at rest with distress', 'Cyanosis', 'Altered mental status'],
      action: 'Dexamethasone + nebulized epinephrine, hospitalize, airway management',
    },
  },
}
